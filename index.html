<style>
button:hover {
  background-color: #0056b3;
}
.error-message {
  color: red;
  margin-bottom: 20px;
  display: none;
}
</style>
</head>
<body>
<div class="container">
  <h1>Signup</h1>
  <form id="surveyForm" method="POST" novalidate>
    <div id="error" class="error-message"></div>

    <label for="first_name">First Name</label>
    <input type="text" id="first_name" name="first_name" required />

    <label for="phone_number">Phone Number</label>
    <input type="tel" id="phone_number" name="phone_number" required />

    <label class="checkbox-label">
      <input type="checkbox" id="tos" name="tos" required />
      I agree to the <a href="https://www.google.com" target="_blank" rel="noopener noreferrer"> Terms of Service</a>
    </label>

    <button type="submit">Submit</button>
  </form>
</div>

<script>
  const form = document.getElementById('surveyForm');
  const errorDiv = document.getElementById('error');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    errorDiv.style.display = 'none';
    errorDiv.textContent = '';

    if (!form.checkValidity()) {
      errorDiv.textContent = 'Please fill all required fields correctly.';
      errorDiv.style.display = 'block';
      return;
    }

    const formData = new FormData(form);
    formData.append('tos', form.tos.checked ? 'agreed' : 'not agreed');

    try {
      const response = await fetch('https://formspree.io/f/mjkrqadn', {
        method: 'POST',
        headers: { 'Accept': 'application/json' },
        body: formData
      });

      if (response.ok) {
        window.location.href = 'thankyou.html';
      } else {
        const data = await response.json();
        if (data.errors) {
          errorDiv.textContent = data.errors.map(err => err.message).join(', ');
        } else {
          errorDiv.textContent = 'Oops! There was a problem submitting your form.';
        }
        errorDiv.style.display = 'block';
      }
    } catch (error) {
      errorDiv.textContent = 'Network error. Please try again later.';
      errorDiv.style.display = 'block';
    }
  });
</script>
</body>
</html>
